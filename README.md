# Описание проекта

Этот проект представляет собой систему управления категориями товаров и самими товарами. Он включает в себя два основных
класса: `Product` (товар) и `Category` (категория), а также функционал для загрузки данных из JSON-файла.

## Структура проекта

- `main.py` — основной модуль, содержащий классы `Product` и `Category`, а также функцию `load_data_from_json` для 
загрузки данных.
- `test_main.py` — модуль с тестами для проверки корректности работы классов.
- `data/products.json` — JSON-файл с данными о товарах и категориях (необходимо создать вручную).

## Классы

### Класс `Product`

Представляет товар с следующими атрибутами:
- `name` — название товара.
- `description` — описание товара.
- `price` — цена товара.
- `quantity` — количество товара в наличии.

### Методы:

- `__repr__` — строковое представление для разработчика.
- `__str__` — пользовательское строковое представление товара.
- `__add__` — позволяет складывать товары по общей стоимости.
- `new_product` — фабричный метод для создания товара с обработкой дубликатов.

**Особенности:**
- При попытке установить отрицательную цену выводится предупреждение.
- При понижении цены требуется подтверждение пользователя.

### Класс `Category`

Представляет категорию товаров с следующими атрибутами:
- `name` — название категории.
- `description` — описание категории.
- `products` — список товаров в категории.

**Статические атрибуты:**
- `total_categories` — общее количество категорий.
- `total_unique_products` — общее количество уникальных товаров.

**Методы:**

- `add_product` — добавляет товар в категорию с обработкой дубликатов.
- `__iter__` — делает категорию итерируемой (возвращает итератор товаров).
- `__repr__` — строковое представление для разработчика.
- `__str__` — пользовательское строковое представление категории.

## Функции

### `load_data_from_json(filename: str) -> List[Category]`

Загружает данные о категориях и товарах из JSON-файла и возвращает список объектов `Category`. Обрабатывает:
- Отсутствие файла
- Некорректный JSON
- Автоматически создает товары и категории

## Тестирование

Для тестирования используется модуль `pytest`. 

**Тесты проверяют:**

1. Работу сеттера цены товара:
   - Запрет отрицательных цен
   - Подтверждение понижения цены
2. Создание товаров:
   - Обычное создание
   - Обработка дубликатов
3. Работу категорий:
   - Добавление товаров
   - Итерацию по товарам
4. Загрузку данных:
   - Обработку ошибок файла
   - Корректность парсинга JSON

**Запуск тестов:**

```bash
pytest tests/test_main.py -v
```

## Тестирование

Файл products.json должен иметь следующую структуру:

json
[
    {
        "name": "Смартфоны",
        "description": "Описание категории смартфонов",
        "products": [
            {
                "name": "Samsung Galaxy S23",
                "description": "Описание товара",
                "price": 80000.0,
                "quantity": 10
            }
        ]
    }
]

## Запуск проекта

1. Убедитесь, что у вас установлен Python 3.x.
2. Создайте файл products.json в папке data.
3. Запустите основной скрипт:

python main.py
